<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate diffusion by wind advection — random_walk • windscape</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate diffusion by wind advection — random_walk"><meta name="description" content='This function estimates diffusion across a windscape by Markov random walk. On each iteration,
the "particle mass" in each grid cell is dispersed within the local 9-cell neighborhood in
proportion with wind conductance. Depending on usage, this "mass" could represent probability,
number of individuals, etc. As the simulation proceeds, the mass diffuses across the landscape.'><meta property="og:description" content='This function estimates diffusion across a windscape by Markov random walk. On each iteration,
the "particle mass" in each grid cell is dispersed within the local 9-cell neighborhood in
proportion with wind conductance. Depending on usage, this "mass" could represent probability,
number of individuals, etc. As the simulation proceeds, the mass diffuses across the landscape.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">windscape</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/windscape.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate diffusion by wind advection</h1>

      <div class="d-none name"><code>random_walk.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function estimates diffusion across a windscape by Markov random walk. On each iteration,
the "particle mass" in each grid cell is dispersed within the local 9-cell neighborhood in
proportion with wind conductance. Depending on usage, this "mass" could represent probability,
number of individuals, etc. As the simulation proceeds, the mass diffuses across the landscape.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">random_walk</span><span class="op">(</span></span>
<span>  <span class="va">rose</span>,</span>
<span>  <span class="va">init</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  record <span class="op">=</span> <span class="va">iter</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"pulse"</span>,</span>
<span>  timescale <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-rose">rose<a class="anchor" aria-label="anchor" href="#arg-rose"></a></dt>
<dd><p>A <code>wind_rose</code>.</p></dd>


<dt id="arg-init">init<a class="anchor" aria-label="anchor" href="#arg-init"></a></dt>
<dd><p>Initial conditions from which to begin diffusion, either a two-column
matrix of coordinates, or a SpatRaster layer with non-negative mass values and the
same spatial properties as <code>rose</code>. If coordinates, the simulation starts with a
mass of 1 at each coordinate location. If a SpatRaster, diffusion is done
directly on the raster; this could be the ouput from a prior random_walk, or any
other data representing quantities to be spatially dispersed.</p></dd>


<dt id="arg-iter">iter<a class="anchor" aria-label="anchor" href="#arg-iter"></a></dt>
<dd><p>Number of simulation iterations (positive integer).</p></dd>


<dt id="arg-record">record<a class="anchor" aria-label="anchor" href="#arg-record"></a></dt>
<dd><p>Integer vector specifying which iterations to record. Default is to
record only the final iteration, i.e. <code>iter</code>. One raster layer is returned for
each value in <code>record</code>.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>Propagation mode, either "pulse" (default) or "ratchet". See details.</p></dd>


<dt id="arg-timescale">timescale<a class="anchor" aria-label="anchor" href="#arg-timescale"></a></dt>
<dd><p>A value between 0 and 1, giving the factor by which to
scale the default time step length (which is calculated from the data; see <a href="rw_max_step.html">rw_max_step</a>).
At each iteration, particle mass either exits cells at the rates given in the wind rose object,
or remains in the cell. The default timescale value of 1 sets the timestep length to the
maximum possible value, allowing the simulation to advance as far as possible in space given the
number of iterations, which is computationally optimal. Reducing this value may be useful for
smoothing the simulation dynamics, and/or setting the timestep to a desired duration.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with two elements: `data`, a SpatRaster with a layer for each value of `record`,
   and `step_length`, the duration of a single iteration (in hours, if trans = 1 and wind field
   units are m/s; multiply this by `iter` to get the duration of the full simulation).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The input wind rose raster is converted to a simplex of nine probabilities for each grid
cell, giving the rates at which particles are retained in a cell or moved to each of its
eight neighbors. Probabilities of moving to a neighboring cell are proportional to conductance
in the wind rose data set, with the probabilities of remaining in a cell scaled so that the
cell with the highest conductance has a zero retention probability; this allows conductance
to be normalized locally to a simplex while remaining proportional across cells and
maximizing the dispersal occurring at each iteration.</p>
<p>The `mode` argument determines how particle mass propagates over time. The default method,
`"pulse"`, tracks the fleeting diffusion of the initial starting particle mass, which will drift
and spread like a cloud, eventually leaving the modeling domain (unless it's a closed spatial
domain). The `mode = "ratchet"` option runs a propagating simulation in which local particle
mass never declines in any cell, with every location continuing to transmit mass at the
cumulative maximum rate; this is more akin to a biological process in which dispersing particles
reproduce locally after establishment, or in which a continuous stream of particles is released
from the original source at every time step.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Kling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

